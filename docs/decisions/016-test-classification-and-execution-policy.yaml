number: 16
title: Test classification and execution policy
category: development
status: accepted
decision: >
  Maintain three test layers: unit tests for hand-written logic, generated-surface contract tests
  for used OpenAPI operations/models, and live integration tests for real Bitbucket behavior.
  Contract coverage is required for used generated operations and is part of CI quality gates.
agent_instructions: >
  Organize tests by execution profile and purpose: unit, contract, and live integration.
  Keep default local checks free of live dependencies.
  For each used generated operation, ensure contract tests assert success parsing and at least one
  mapped failure path; add pagination assertions for paged operations.
  Maintain automated used-operation inventory and keep contract mapping current in CI.
rationale: >
  This structure preserves fast feedback while giving explicit guarantees for the generated code
  surfaces consumed by hand-written services.
rejected_alternatives:
  - alternative: Unit + live tests only
    reason: Leaves generated operation parsing/mapping guarantees implicit and non-auditable.
provenance: guided-ai
