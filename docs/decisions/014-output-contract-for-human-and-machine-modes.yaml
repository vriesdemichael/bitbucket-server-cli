number: 14
title: Output contract for human and machine modes
category: architecture
status: accepted
decision: >
  Provide consistent human-readable output by default and a stable machine mode via --json.
  JSON responses must use versioned envelopes for forward-compatible parsing.
agent_instructions: >
  Keep display formatting separated from domain/workflow logic.
  Ensure every data-returning command supports --json and stable field naming.
  Changes to JSON contracts require explicit versioning and migration notes.
rationale: >
  The CLI must serve both interactive operators and automation scripts without ambiguity.
  Stable machine contracts reduce breaking changes and improve integration reliability.
rejected_alternatives:
  - alternative: Human output only
    reason: Not sufficient for automation and CI/local scripting workflows.
  - alternative: Unversioned JSON payloads
    reason: Harder to evolve safely over time.
provenance: guided-ai
