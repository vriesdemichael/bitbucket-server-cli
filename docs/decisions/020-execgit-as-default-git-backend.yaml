number: 20
title: Execgit as default Git backend
category: architecture
status: accepted
supersedes: 12
decision: >
  Use execgit (wrapping the system git binary) as the default Git backend for repository operations.
  Keep the Git backend abstraction in place so alternative implementations can be added later,
  but they are not the default path.
agent_instructions: >
  Implement Git workflows against the backend interface but route default behavior through execgit.
  Focus on robust command execution (cwd/env handling, quoting, timeouts, stdout/stderr capture)
  and deterministic error classification.
  Treat any non-exec backend as opt-in and non-default unless a superseding decision changes this.
rationale: >
  Execgit provides the highest behavior fidelity with upstream Git and avoids feature/compatibility
  gaps commonly seen in pure library implementations.
  This aligns with the project's reliability goals and reduces risk of subtle Git semantic drift.
rejected_alternatives:
  - alternative: Go-native Git library as default backend
    reason: Higher risk of parity gaps and edge-case incompatibilities for enterprise workflows.
  - alternative: No backend abstraction
    reason: Reduces flexibility and makes future migration/testing strategies harder.
provenance: guided-ai
